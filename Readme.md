Aplicatia implementata respecta modelul client-server pentru a gestiona mesajele.
Pentru comunicarea dintre acestia am implementat o structura de date tcp_message ce retine ip-ul de unde a fost trimis mesajul, portul pe care a fost trimis, si un mesaj conform celui descris, cu campurile topic, tip date si continut. Exceptia este atunci cand un client doreste sa se conecteze, el trimite id-ul lui in loc de structura. 

Serverul:
Se creeaza un socket tcp pentru comunicarea cu clientii tcp (subscribers) si unul udp pentru comunicarea cu clientii udp (cei care trimit mesaje dintr-un anumit topic) pe portul primit ca argument in linia de comanda. Se asigneaza o adresa pentru fiecare socket cu bind. Pentru cel tcp, se dezactiveaza folosirea algoritmului Nagle.
Inainte de a porti bucla infinita a serverului, se face un poll cu file descriptorii socket-ilor de unde se pot primi pachete. La inceput se adauga file descriptorii de la socketii udp si tcp creati inainte si cel de la stdin. Tot aici, este initializat si un vector de clieti ce retine date despre acestia: file descriptor al socketului, id, lista de topicuri la care e abonat clientul si daca clientul este conectat sau nu.
In bucla serverului, cand acesta primeste un pachet, se parcurg toti file descriptorii din poll pentru a identifica de pe ce socket provine pachetul. Sunt 4 cazuri posibile:
1. stdin - Se citeste inputul, iar daca acesta este "exit", serverul trebuie sa se inchida. Se parcurg toti clientii si se trimite un mesaj de tipul tcp_message cu ip-ul si port-ul 0, pentru a semnala faptul ca serverul se inchide.
2. tcp file decriptor - Aceste mesaje pot fi doar de la clienti care vor sa se conecteaza sau reconecteze. Se accepta conexiunea cu clientul, apoi se verifica daca id-ul lui exista deja in vectorul de clienti. Daca exita si clientul este conectat, se trimite un mesaj cu ip-ul si port-ul 0 pentru a inchide clientul. Daca id-ul exista dar clientul nu e conectat, se actualizeaza file descriptor-ul din vector si statusul de conectat; si se adauga noul file descriptor in poll. Daca id-ul nu exista, un client nou incearca sa se conecteze. Informatiile sale sunt adaugate in vectorul de clienti si file descriptorul este adaugat in poll.
3. udp file descriptor - Un client udp a trimis un mesaj ce trebuie redirectionat catre clientii care sunt abonati la topicul respectiv. Mai inati, este extras continutul mesajului in functie de tipul de date al acestuia. Apoi, sunt parcursi toti clientii, iar pentru fiecare client se itereaza prin vectorul de topicuri, care sunt comparate pe rand cu cel primit. Pentru a implementa functionalitatea wildcard-urilor, sunt parcurse ambele topicuri in acelasi timp, comparatia facandu-se litera cu litera, iar, daca se intalneste caracterul '+', este parcurs topicul primit dupa urmatorul caracter '/', de unde se rezuma comparatiile; daca este intalnit caracterul '*', este parcurs in continuare topicul primit, iar dupa fiecare '/' se incearca rezumarea comparatiilor, si in cazul in care literele nu se potrivesc, se sare la urmatorul cuvant.
4. file descriptor-ul unui client - Un client tcp ii trimite mesaj serverului doar atunci cand vrea sa se deconecteze, sa se aboneze la un topic sau sa se dezaboneze de la un topic. Prin conventie, daca ip-ul si port-ul din tcp_message-ul primit sunt 0, clientul vrea sa se inchida. Caz in care socket-ul este inchis si scos din poll, iar starea clientului de conectare este 0. Daca ip-ul este 1 si port-ul este 0, clientul vrea sa se aboneze la un topic ce se afla in campul topic din mesaj. Acesta este adaugat in lista de topicuri a clientului respectiv. Daca ip-ul este 0 si port-ul este 1, clientul vrea sa se dezaboneze de la un topic. El este cautat in vectorul de topicuri al clientul si este sters.

Clientul:
Se creaza un socket tcp pentru comunicarea cu serverul pe portul primit ca argument in linia de comanda. Se dezactiveaza folosirea algoritmului Nagle. Prin socket, clientul se conecteaza la server si se trimite id-ul primit ca argument in linia de comanda.
Se creeaza un poll, care de acesta data va retine doar file descriptorii de la stdin si cel al socket-ului tcp.
In bucla clientului, cand acesta primeste un pachet, se parcurg cei doi file descriptori din poll pentru a identifica de pe care socket provine pachetul. Sunt 2 cazuri:
1. stdin - Clientul poate primi comenzi de exit, subscribe sau unsubscribe. Cand se citeste exit, clientul se inchide si este trimis un mesaj catre server cu ip-ul si port-ul 0 pentru a semnala inchiderea. Cand comanda este subscribe, se construieste un mesaj cu topicul cel citit de la tastatura, iar ip-ul e setat pe 1 si port-ul pe 0 prin conventie. Cand comanda este unsubscribe, ip-ul este 0 si port-ul este 1, iar topicul este setat la fel. Mesajul este trimis pe tcp file descriptor catre server.
2. tcp file descriptor - Clientul primeste un mesaj de la server daca acesta s-a inchis sau daca este un mesaj primit dintr-un topic la care el este abonat. Daca ip-ul si port-ul au valoarea 0, clientul se inchide. Altfel, se afiseaza ip-ul si port-ul de unde a fost trimis, si informatiile despre mesaj in functie de tipul acestuia.